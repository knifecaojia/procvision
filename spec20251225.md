
# 背景信息

当前项目是一个工业视觉装配引导与检测项目的桌面端，这个项目包括BC/S架构。其中C端即为本项目，主要完成与server 端通信 实现用户登陆鉴权、拉取任务清单，执行视觉引导的检测任务，上报检测日志与检测结果（结构化数据与图片）。


1. # 获取工单信息

* 概述：用于客户端向服务器端请求工单信息
* 方法：GET
* 路径：/client/workorder/list
* 注意事项：服务端应该先从token中解析出客户端所登录的装配工人编码，再根据装配工人编码查询该工人下的工单信息进行返回。
* 返回值：以JSON形式返回，data中内容如下：

| 名称              | 类型     | 备注                                                 |
| ----------------- | -------- | ---------------------------------------------------- |
| work _order_code  | string   | 工单编码                                             |
| craft_code        | string   | 工艺编码                                             |
| craft_version     | string   | 工艺版本                                             |
| craft_name        | string   | 工艺名称                                             |
| process_code      | string   | 工序编码                                             |
| process_name      | string   | 工序名称                                             |
| start_time        | datetime | 计划开始时间                                         |
| end_time          | datetime | 计划结束时间                                         |
| worker_code       | string   | 装配工人编码                                         |
| worker_name       | string   | 装配工人姓名                                         |
| status            | tinyint  | 工单状态(1为待开始，2为进行中，3为已完成,4为BLOCKED) |
| algorithm_code    | string   | 算法编码                                             |
| algorithm_name    | string   | 算法名称                                             |
| algorithm_version | string   | 算法版本                                             |
| step_infos        | text     | json列表形式存储引导步骤                             |

step_infos内容如下，注意当工序下不存在工步的情况时，列表中只包含一个数据即可：

```JSON
[
{
  "step_code":"",
   "step_name":"",
  "step_content":"",
   "guide_url":""
},
{
 "step_code":"",
   "step_name":"",
   "step_content":"",
   "guide_url":""
}
]
```

### 接口基本信息

| ### 项   | ### 内容               |
| -------- | ---------------------- |
| 接口路径 | /client/workorder/list |
| 请求方法 | GET                    |
| 接口描述 | 请求工单信息           |

### Request：请求参数/Params

| ### 参数名 | ### 类型 | ### 是否必传 | ### 描述                                             |
| ---------- | -------- | ------------ | ---------------------------------------------------- |
| pageNum    | number   | 是           | 页码                                                 |
| pageSize   | number   | 是           | 每页条数                                             |
| status     | number   | 否           | 状态参数(1为待开始，2为进行中，3为已完成,4为BLOCKED) |

## Respose：

```JSON
{
    "total": 0,
    "rows": [
    {
            "work_order_code": "1000023451-01",
            "craft_code": "JZ2.940.10287GY-TX02",
            "craft_version": "N.1",
            "craft_name": "Ls波段上天线工艺",
            "process_code": "30",
            "process_name": "装配",
            "start_time": "2025-12-09 08:30:00",
            "end_time": "2025-12-09 12:00:00",
            "worker_code": "07488",
            "worker_name": "张三",
            "status": "1",
            "algorithm_code": "demo1",
            "algorithm_name": "demo1",
            "algorithm_version": "1.0",
            "step_infos": [
                {
                    "step_code": "1",
                    "step_name": "1",
                    "step_content": "按表格准备零部件和辅料。",
                    "guide_url": null
                },
                {
                    "step_code": "2",
                    "step_name": "2",
                    "step_content": "检查连接器状态，确认一致后装配。",
                    "guide_url": null
                },
                {
                    "step_code": "3",
                    "step_name": "3",
                    "step_content": "按工序简图所示将连接器装配到腔体上(注意连接器的安装方向)，螺钉紧固前在螺纹根部涂适量乐泰243，按对称交叉分步拧紧，在连接器与腔体接触出面涂抹一圈南大704硅胶。溢出的胶液用脱脂棉蘸无水乙醇清理干净。",
                    "guide_url": null
                },
                {
                    "step_code": "4",
                    "step_name": "4",
                    "step_content": "按照简图所示安装接地柱，螺母螺纹涂乐泰272螺纹紧固剂。注意接地柱各个零部件安装位置。",
                    "guide_url": null
                },
                {
                    "step_code": "1",
                    "step_name": "1",
                    "step_content": "按表格准备零部件和辅料。",
                    "guide_url": null
                },
                {
                    "step_code": "2",
                    "step_name": "2",
                    "step_content": "检查连接器状态，确认一致后装配。",
                    "guide_url": null
                },
                {
                    "step_code": "3",
                    "step_name": "3",
                    "step_content": "按工序简图所示将连接器装配到腔体上(注意连接器的安装方向)，螺钉紧固前在螺纹根部涂适量乐泰243，按对称交叉分步拧紧，在连接器与腔体接触出面涂抹一圈南大704硅胶。溢出的胶液用脱脂棉蘸无水乙醇清理干净。",
                    "guide_url": null
                },
                {
                    "step_code": "4",
                    "step_name": "4",
                    "step_content": "按照简图所示安装接地柱，螺母螺纹涂乐泰272螺纹紧固剂。注意接地柱各个零部件安装位置。",
                    "guide_url": null
                }
            ]
        },
     ],
    "code": 200,
    "msg": "查询成功"
}
```

2. # 获取算法信息

* 概述：用于客户端向服务器端请求算法信息
* 方法：GET
* 路径：/client/algorithm/list
* 注意：只返回有效的算法，作废的算法不返回
* 返回值：以JSON形式返回，data中内容如下：

| 名称    | 类型   | 备注                    |
| ------- | ------ | ----------------------- |
| code    | string | 算法编码                |
| name    | string | 算法名称                |
| version | string | 算法版本                |
| url     | string | 算法所对应的url下载地址 |

### 接口基本信息

| ### 项   | ### 内容               |
| -------- | ---------------------- |
| 接口路径 | /client/algorithm/list |
| 请求方法 | GET                    |
| 接口描述 | 获取算法信息           |

### Request：请求参数/Params

| ### 参数名 | ### 类型 | ### 是否必传 | ### 描述 |
| ---------- | -------- | ------------ | -------- |
| pageNum    | number   | 是           | 页码     |
| pageSize   | number   | 是           | 每页条数 |

### Respose：

```JSON
{
    "total": 1,
    "rows": [
        {
            "code": "z1",
            "name": "demo1",
            "version": "1.0",
            "url": "http://39.104.202.123:9001/api/v1/download-shared-object/aHR0cDovLzEyNy4wLjAuMTo5MDAwL2Rldi9NYW1iYS5qcGc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD0yQktVVTFHNlUyOTdGMFkzSDNFMyUyRjIwMjUxMjI0JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MTIyNFQxMzA0MDNaJlgtQW16LUV4cGlyZXM9NDMyMDAmWC1BbXotU2VjdXJpdHktVG9rZW49ZXlKaGJHY2lPaUpJVXpVeE1pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SmhZMk5sYzNOTFpYa2lPaUl5UWt0VlZURkhObFV5T1RkR01Ga3pTRE5GTXlJc0ltVjRjQ0k2TVRjMk5qWXlORFU0T0N3aWNHRnlaVzUwSWpvaVlXUnRhVzRpZlEuVHFEQUUweW54RzRBR3dhb3lRR1pPdHg5UHRPUjVIQ0x4Z3FLNHZxUlhJcUFpd1FUQ1dldlFEWkJGX2YxRGo2SEF3dlRWNG83YnF6Q2RZQ0Q1QjI4ZXcmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JnZlcnNpb25JZD1udWxsJlgtQW16LVNpZ25hdHVyZT0zZTQxY2ZkODQwZDI0ZDMwNTBjMGMwODY1NmYxMmI3OWFiMGY0M2MzMTMyYzVkMjQyMDMxOGUwYWI2YzUyMGQ5"
        }
    ],
    "code": 200,
    "msg": "查询成功"
}
```

3. # 登录

* 注：username为admin，password为admin123。

### 接口基本信息

| ### 项   | ### 内容           |
| -------- | ------------------ |
| 接口路径 | /client/auth/login |
| 请求方法 | POST               |
| 接口描述 | 用户登录           |

### Request：请求参数

| ### 参数名 | ### 类型 | ### 是否必传 | ### 描述 |
| ---------- | -------- | ------------ | -------- |
| username   | string   | 是           | 用户名   |
| password   | string   | 是           | 密码     |

### Respose：

```JSON
{
    "msg": "登录成功",
    "code": 200,
    "data": {
        "expire_time": 1766642374437,
        "token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImxvZ2luX3VzZXJfa2V5IjoiNmNhZjIwMjItNTkzNC00YTRkLWIxZGYtMGVkNjU0NjE2YmVjIn0.nwbuobwgmz6Tk1FGtlBNtipxCsX4cGn9v7OOKokQFpDOURcK7zFOWX3mliWf994NLgQmEjWJpIdzZMVK0L57kQ"
    }
}
```


4. # 保活接口

### 接口基本信息

| ### 项   | ### 内容            |
| -------- | ------------------- |
| 接口路径 | /client/auth/health |
| 请求方法 | GET                 |
| 接口描述 | 测试保活            |

### Respose：

```JSON
{
    "msg": "登录成功",
    "code": 200,
    "data": {
        "expire_time": 1766642374437,
        "token": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImxvZ2luX3VzZXJfa2V5IjoiNmNhZjIwMjItNTkzNC00YTRkLWIxZGYtMGVkNjU0NjE2YmVjIn0.nwbuobwgmz6Tk1FGtlBNtipxCsX4cGn9v7OOKokQFpDOURcK7zFOWX3mliWf994NLgQmEjWJpIdzZMVK0L57kQ"
    }
}
```
